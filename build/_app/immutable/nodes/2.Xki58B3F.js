import{f as oe,a as se}from"../chunks/DO2sOjAq.js";import{i as je}from"../chunks/poqk6lLb.js";import{o as ea}from"../chunks/DbDpVIfj.js";import{i as pe,b as aa,c as ge,h as D,K as ta,a as ra,w as r,aq as sa,r as na,H as ia,s as Oe,d as _e,k as ne,W as la,ao as oa,a6 as ze,e as X,ar as z,j as Ee,l as va,R as Fe,as as G,am as Me,at as ua,au as ca,av as fa,aw as da,f as Pe,p as We,ax as we,ai as ha,al as pa,g as ga,V as _a,ay as wa,az as ma,aA as ya,aB as xa,aC as Ea,aD as Sa,aE as Ye,q as B,S as Ma,aF as ba,C as ka,aG as Aa,aH as Ta,D as me,F as Ia,G as w,J as E,I as _,aI as I,x as Na}from"../chunks/DKHCxGQQ.js";import{e as y,s as j}from"../chunks/HKu4UYYu.js";import{i as Da}from"../chunks/MbY572J-.js";function Ca(e,a,t){for(var c=[],v=a.length,o,f=a.length,i=0;i<v;i++){let p=a[i];We(p,()=>{if(o){if(o.pending.delete(p),o.done.add(p),o.pending.size===0){var x=e.outrogroups;Se(Me(o.done)),x.delete(o),x.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var d=c.length===0&&t!==null;if(d){var s=t,h=s.parentNode;pa(h),h.append(s),e.items.clear()}Se(a,!d)}else o={pending:new Set(a),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Se(e,a=!0){for(var t=0;t<e.length;t++)ga(e[t],a)}var Ue;function La(e,a,t,c,v,o=null){var f=e,i=new Map;{var d=e;f=D?ge(ta(d)):d.appendChild(pe())}D&&ra();var s=null,h=sa(()=>{var S=t();return ua(S)?S:S==null?[]:Me(S)}),p,x=!0;function k(){A.fallback=s,Ra(A,p,f,a,c),s!==null&&(p.length===0?(s.f&z)===0?Pe(s):(s.f^=z,ae(s,null,f)):We(s,()=>{s=null}))}var l=aa(()=>{p=r(h);var S=p.length;let C=!1;if(D){var b=na(f)===ia;b!==(S===0)&&(f=Oe(),ge(f),_e(!1),C=!0)}for(var F=new Set,L=X,H=va(),R=0;R<S;R+=1){D&&ne.nodeType===la&&ne.data===oa&&(f=ne,C=!0,_e(!1));var U=p[R],M=c(U,R),g=x?null:i.get(M);g?(g.v&&ze(g.v,U),g.i&&ze(g.i,R),H&&L.skipped_effects.delete(g.e)):(g=Va(i,x?f:Ue??(Ue=pe()),U,M,R,v,a,t),x||(g.e.f|=z),i.set(M,g)),F.add(M)}if(S===0&&o&&!s&&(x?s=Ee(()=>o(f)):(s=Ee(()=>o(Ue??(Ue=pe()))),s.f|=z)),D&&S>0&&ge(Oe()),!x)if(H){for(const[te,$]of i)F.has(te)||L.skipped_effects.add($.e);L.oncommit(k),L.ondiscard(()=>{})}else k();C&&_e(!0),r(h)}),A={effect:l,items:i,outrogroups:null,fallback:s};x=!1,D&&(f=ne)}function Ra(e,a,t,c,v){var M;var o=a.length,f=e.items,i=e.effect.first,d,s=null,h=[],p=[],x,k,l,A;for(A=0;A<o;A+=1){if(x=a[A],k=v(x,A),l=f.get(k).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(l),g.done.delete(l);if((l.f&z)!==0)if(l.f^=z,l===i)ae(l,null,t);else{var S=s?s.next:i;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),O(e,s,l),O(e,l,S),ae(l,S,t),s=l,h=[],p=[],i=s.next;continue}if((l.f&we)!==0&&Pe(l),l!==i){if(d!==void 0&&d.has(l)){if(h.length<p.length){var C=p[0],b;s=C.prev;var F=h[0],L=h[h.length-1];for(b=0;b<h.length;b+=1)ae(h[b],C,t);for(b=0;b<p.length;b+=1)d.delete(p[b]);O(e,F.prev,L.next),O(e,s,F),O(e,L,C),i=C,s=L,A-=1,h=[],p=[]}else d.delete(l),ae(l,i,t),O(e,l.prev,l.next),O(e,l,s===null?e.effect.first:s.next),O(e,s,l),s=l;continue}for(h=[],p=[];i!==null&&i!==l;)(d??(d=new Set)).add(i),p.push(i),i=i.next;if(i===null)continue}(l.f&z)===0&&h.push(l),s=l,i=l.next}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(Se(Me(g.done)),(M=e.outrogroups)==null||M.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||d!==void 0){var H=[];if(d!==void 0)for(l of d)(l.f&we)===0&&H.push(l);for(;i!==null;)(i.f&we)===0&&i!==e.fallback&&H.push(i),i=i.next;var R=H.length;if(R>0){var U=o===0?t:null;Ca(e,H,U)}}}function Va(e,a,t,c,v,o,f,i){var d=(f&ca)!==0?(f&fa)===0?G(t,!1,!1):Fe(t):null,s=(f&da)!==0?Fe(v):null;return{v:d,i:s,e:Ee(()=>(o(a,d??t,s??v,i),()=>{e.delete(c)}))}}function ae(e,a,t){if(e.nodes)for(var c=e.nodes.start,v=e.nodes.end,o=a&&(a.f&z)===0?a.nodes.start:t;c!==null;){var f=ha(c);if(o.before(c),c===v)return;c=f}}function O(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}function Ba(e,a){return e==null?null:String(e)}function Ha(e,a,t,c){var v=e.__style;if(D||v!==a){var o=Ba(a);(!D||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=a}return c}const Oa=Symbol("is custom element"),za=Symbol("is html");function ee(e){if(D){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var c=e.value;le(e,"value",null),e.value=c}if(e.hasAttribute("checked")){var v=e.checked;le(e,"checked",null),e.checked=v}}};e.__on_r=t,_a(t),wa()}}function Fa(e,a){var t=Ke(e);t.value===(t.value=a??void 0)||e.value===a&&(a!==0||e.nodeName!=="PROGRESS")||(e.value=a??"")}function le(e,a,t,c){var v=Ke(e);D&&(v[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||v[a]!==(v[a]=t)&&(a==="loading"&&(e[xa]=t),t==null?e.removeAttribute(a):typeof t!="string"&&Ua(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function Ke(e){return e.__attributes??(e.__attributes={[Oa]:e.nodeName.includes("-"),[za]:e.namespaceURI===ma})}var qe=new Map;function Ua(e){var a=e.getAttribute("is")||e.nodeName,t=qe.get(a);if(t)return t;qe.set(a,t=[]);for(var c,v=e,o=Element.prototype;o!==v;){c=Ea(v);for(var f in c)c[f].set&&t.push(f);v=ya(v)}return t}function ie(e,a,t=a){var c=new WeakSet;Sa(e,"input",async v=>{var o=v?e.defaultValue:e.value;if(o=ye(e)?xe(o):o,t(o),X!==null&&c.add(X),await Ye(),o!==(o=a())){var f=e.selectionStart,i=e.selectionEnd,d=e.value.length;if(e.value=o??"",i!==null){var s=e.value.length;f===i&&i===d&&s>d?(e.selectionStart=s,e.selectionEnd=s):(e.selectionStart=f,e.selectionEnd=Math.min(i,s))}}}),(D&&e.defaultValue!==e.value||B(a)==null&&e.value)&&(t(ye(e)?xe(e.value):e.value),X!==null&&c.add(X)),Ma(()=>{var v=a();if(e===document.activeElement){var o=ba??X;if(c.has(o))return}ye(e)&&v===xe(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function ye(e){var a=e.type;return a==="number"||a==="range"}function xe(e){return e===""?null:+e}async function N(e,a={},t){return window.__TAURI_INTERNALS__.invoke(e,a,t)}function Ge(e,a="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(e,a)}var qa=oe('<img class="app-icon svelte-1uha8ag" alt=""/>'),Ga=oe('<div class="app-row svelte-1uha8ag"><div class="icon-box svelte-1uha8ag"><!> <div class="app-icon-fallback svelte-1uha8ag"><svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg></div></div> <div class="slider-container svelte-1uha8ag"><input type="range" min="0" max="100" class="svelte-1uha8ag"/> <span class="value-badge svelte-1uha8ag"> </span></div></div>'),Pa=oe('<div class="loading svelte-1uha8ag">Scanning sessions...</div>'),Wa=oe('<main class="svelte-1uha8ag"><section class="merged-controls svelte-1uha8ag"><div class="control-row svelte-1uha8ag"><div class="icon-box svelte-1uha8ag" title="System Volume"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg></div> <div class="slider-container svelte-1uha8ag"><input type="range" min="0" max="100" class="svelte-1uha8ag"/> <span class="value-badge svelte-1uha8ag"> </span></div></div> <div class="control-row svelte-1uha8ag"><div class="icon-box svelte-1uha8ag" title="Microphone"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="22"></line><line x1="8" y1="22" x2="16" y2="22"></line></svg></div> <div class="slider-container svelte-1uha8ag"><input type="range" min="0" max="100" class="svelte-1uha8ag"/> <span class="value-badge svelte-1uha8ag"> </span></div></div> <div class="control-row svelte-1uha8ag"><div class="icon-box svelte-1uha8ag" title="Brightness"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="M4.93 4.93l1.41 1.41"></path><path d="M17.66 17.66l1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="M4.93 19.07l1.41-1.41"></path><path d="M17.66 6.34l1.41-1.41"></path></svg></div> <div class="slider-container svelte-1uha8ag"><input type="range" min="10" max="100" class="svelte-1uha8ag"/> <span class="value-badge svelte-1uha8ag"> </span></div></div> <div class="control-row svelte-1uha8ag"><div class="icon-box svelte-1uha8ag" title="Mouse Speed"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="7"></rect><path d="M12 6v4"></path></svg></div> <div class="slider-container svelte-1uha8ag"><input type="range" min="1" max="20" class="svelte-1uha8ag"/> <span class="value-badge svelte-1uha8ag"> </span></div></div></section> <section class="app-section svelte-1uha8ag"><div class="app-list svelte-1uha8ag"></div></section></main>');function Za(e,a){ka(a,!1);let t=G(0),c=G(0),v=G(100),o=G(10),f=G([]),i,d=0,s=!1,h=G(!1),p=!1;async function x(){await Ye();const n=document.querySelector("main");if(n){const u=n.offsetHeight;try{await N("resize_window",{height:u+2})}catch(m){console.error(m)}}}function k(n,u){let m;return function(...T){clearTimeout(m),m=setTimeout(()=>n.apply(this,T),u)}}const l=k(async n=>{try{await N("set_system_volume",{vol:n/100})}catch(u){console.error(u)}},50),A=k(async n=>{try{await N("set_mic_volume",{vol:n/100})}catch(u){console.error(u)}},50),S=k(async n=>{try{await N("set_brightness",{val:n/100})}catch(u){console.error(u)}},50),C=k(async n=>{try{await N("set_mouse_speed",{val:Math.round(n)})}catch(u){console.error(u)}},100),b=k(async(n,u)=>{try{await N("set_app_volume",{pid:n,vol:u/100})}catch(m){console.error(m)}},50);function F(){d=Date.now(),l(r(t))}function L(){d=Date.now(),A(r(c))}function H(){d=Date.now(),r(v)<10&&I(v,10),S(r(v))}function R(){d=Date.now(),C(r(o))}function U(n,u){d=Date.now();const m=r(f).find(T=>T.pid===n);m&&(m.volume=u),b(n,u)}function M(){s=!0,d=Date.now()}function g(){s=!1,d=Date.now()}async function te(){if(!p&&!(r(h)&&Date.now()-d<1e3)){p=!0;try{const n=await Promise.allSettled([N("get_system_volume"),N("get_mic_volume"),N("get_brightness"),N("get_mouse_speed"),N("get_app_volumes")]);if(s)return;const[u,m,T,Q,re]=n;if(u.status==="fulfilled"){const V=u.value*100;(!r(h)||Math.abs(V-r(t))>1)&&I(t,V)}if(m.status==="fulfilled"){const V=m.value*100;(!r(h)||Math.abs(V-r(c))>1)&&I(c,V)}if(T.status==="fulfilled"){const V=T.value*100;(!r(h)||Math.abs(V-r(v))>1)&&I(v,V)}Q.status==="fulfilled"&&I(o,Q.value),re.status==="fulfilled"&&I(f,re.value),r(h)||(I(h,!0),x())}catch(n){console.error("Load State Error:",n)}finally{p=!1}}}ea(()=>{te(),i=setInterval(()=>{document.visibilityState==="visible"&&te()},2500);const n=()=>{s&&(s=!1)};return window.addEventListener("pointerup",n),window.addEventListener("blur",n),()=>{i&&clearInterval(i),window.removeEventListener("pointerup",n),window.removeEventListener("blur",n)}}),Aa(()=>(r(h),r(f)),()=>{r(h)&&r(f)&&x()}),Ta(),je();var $=Wa(),ve=w($),ue=w(ve),be=E(w(ue),2),P=w(be);ee(P);var ke=E(P,2),Je=w(ke,!0);_(ke),_(be),_(ue);var ce=E(ue,2),Ae=E(w(ce),2),W=w(Ae);ee(W);var Te=E(W,2),Xe=w(Te,!0);_(Te),_(Ae),_(ce);var fe=E(ce,2),Ie=E(w(fe),2),Y=w(Ie);ee(Y);var Ne=E(Y,2),$e=w(Ne,!0);_(Ne),_(Ie),_(fe);var De=E(fe,2),Ce=E(w(De),2),K=w(Ce);ee(K);var Le=E(K,2),Qe=w(Le,!0);_(Le),_(Ce),_(De),_(ve);var Re=E(ve,2),Ve=w(Re);La(Ve,5,()=>r(f),n=>n.pid+n.name,(n,u)=>{var m=Ga(),T=w(m),Q=w(T);{var re=q=>{var Z=qa();me(de=>le(Z,"src",de),[()=>(r(u),Na(Ge),B(()=>r(u).icon_path.startsWith("data:")?r(u).icon_path:Ge(r(u).icon_path)))]),y("error",Z,de=>{const he=de.currentTarget;he.style.display="none",he.nextElementSibling&&(he.nextElementSibling.style.display="flex")}),se(q,Z)};Da(Q,q=>{r(u),B(()=>r(u).icon_path)&&q(re)})}var V=E(Q,2);_(T);var Be=E(T,2),J=w(Be);ee(J);var He=E(J,2),Ze=w(He,!0);_(He),_(Be),_(m),me((q,Z)=>{le(T,"title",(r(u),B(()=>r(u).name))),Ha(V,`display: ${r(u),B(()=>!r(u).icon_path||r(u).icon_path===""?"flex":"none")??""}`),Fa(J,q),j(Ze,Z)},[()=>(r(u),B(()=>Math.round(r(u).volume*100))),()=>(r(u),B(()=>Math.round(r(u).volume*100)))]),y("input",J,q=>U(r(u).pid,q.currentTarget.valueAsNumber)),y("pointerdown",J,M),y("pointerup",J,g),se(n,m)},n=>{var u=Pa();se(n,u)}),_(Ve),_(Re),_($),me((n,u,m)=>{j(Je,n),j(Xe,u),j($e,m),j(Qe,r(o))},[()=>(r(t),B(()=>Math.round(r(t)))),()=>(r(c),B(()=>Math.round(r(c)))),()=>(r(v),B(()=>Math.round(r(v))))]),ie(P,()=>r(t),n=>I(t,n)),y("input",P,F),y("pointerdown",P,M),y("pointerup",P,g),ie(W,()=>r(c),n=>I(c,n)),y("input",W,L),y("pointerdown",W,M),y("pointerup",W,g),ie(Y,()=>r(v),n=>I(v,n)),y("input",Y,H),y("pointerdown",Y,M),y("pointerup",Y,g),ie(K,()=>r(o),n=>I(o,n)),y("input",K,R),y("pointerdown",K,M),y("pointerup",K,g),se(e,$),Ia()}export{Za as component};
